<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="David, Reyes, Columbia University, Mechanical Engineering, Robotics">
    <meta name="description" content="David Reyes's Portfolio Website">
    <meta name="author" content="David Reyes">
    <meta name="viewport" content="initial-scale=1, width=device-width">

    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">

    <title>Bipedal Walker | David Reyes</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar sticky-top shadow">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <span class="brand-icon">DR</span>
                <span class="brand-name">David Reyes</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../about.html">About</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Projects</a>
                        <ul class="dropdown-menu dropdown-menu-dark shadow">
                            <li><a class="dropdown-item" href="../projects/bipedal.html">Bipedal Walker</a></li>
                            <li><a class="dropdown-item" href="../projects/aircraft.html">Aircraft Design</a></li>
                            <li><a class="dropdown-item" href="../projects/digestor.html">Cow Digestor</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Relevant Coursework</a>
                        <ul class="dropdown-menu dropdown-menu-dark shadow">
                            <li><a class="dropdown-item" href="../coursework/labview.html">Data Acquisition</a></li>
                            <li><a class="dropdown-item" href="../coursework/designlab.html">Manufacturing Lab</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <main class="container mt-5">
        <h1 class="text-center mb-5" data-aos="zoom-in-up">Bipedal Walker</h1>
        <section class="mb-5">
            <div class="row align-items-center">
                <div class="col-md-10 mx-auto">
                    <div class="bg-light p-4 rounded shadow-sm" data-aos="fade-up">
                        <h2 class="fw-bold mb-3">Project Overview</h2>
                        <p class="lead text-muted">
                            Designed and built a robotic leg system as part of a project focused on developing modular, functional, and mechanically efficient joints. The robot features custom 3D-printed components, heat-set inserts, and precise servo motor control. Explored various motion patterns, addressed fit issues, and implemented robust error-handling in code. Applications include advancing robotics for confined spaces and automation. Demonstrated proficiency in CAD, motion planning, and hardware integration throughout the development process.    
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="week-deck-section mb-5 bg-light py-5 rounded shadow-sm">
            <div class="container">
                <h1 class="section-title">Development Timeline</h1>
            </div>
            <div class="container week-deck-wrapper">
                <div class="week-deck">
                    <div class="week-card" data-week="1">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 1: Concept Sketches</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Starting off the design process, a few potential designs were to be devised, sketched out in pencil and paper.
                                        The requirements for the project were that the robot make use of legged locomotion and be comprised of 8 rotational motors.
                                        As part of each of the 3 sketches presented, estimated total motor energy consumption and battery life was included to provide as much detail as possible additional to the placement of electronic components and drawing techniques that bring realism.
                                    </p>
                                    <p>
                                        The first concept is a three legged robot that utilizes <strong>8</strong> motors, <strong>6</strong> for the two legs in the back and <strong>2</strong> for the front leg.
                                        Inspiration for this concept came from a Star Wars vehicle called AT-AP.
                                        <strong>This was the winning concept.</strong>
                                    </p>
                                    <p>
                                        The second concept is a six legged robot that also utilizes <strong>8</strong> motors, <strong>1</strong> for each leg and <strong>2</strong> to help the movement mechanism work.
                                        Inspiration for this concept also came from a Star Wars vehicle called AT-TE.
                                    </p>
                                    <p>
                                        The third concept is a four legged robot makes use of <strong>6</strong> motors. The legs come in pairs, allocating <strong>3</strong> motors for each pair. AI was put to use to generate potential ideas, creating a frog-like robot that was deemed promising.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel1">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/Development Timeline/Week 1/concept1.PNG" class="carousel-img active" alt="Concept 1" data-caption="Sketch of the first concept">
                                            <img src="../images/Development Timeline/Week 1/concept1_front_profile.PNG" class="carousel-img" alt="Concept 1 Front Profile" data-caption="Front profile sketch of the first concept">
                                            <img src="../images/Development Timeline/Week 1/concept1_no_lid.PNG" class="carousel-img" alt="Concept 1 with No Lid" data-caption="Sketch of the first concept without the protective cover">
                                            <img src="../images/Development Timeline/Week 1/concept1_side_profile.PNG" class="carousel-img" alt="Concept 1 Side Profile" data-caption="Side profile sketch of the first concept">
                                            <img src="../images/Development Timeline/Week 1/concept2.PNG" class="carousel-img" alt="Concept 2" data-caption="Sketch of the second concept">
                                            <img src="../images/Development Timeline/Week 1/concept2_front_profile.PNG" class="carousel-img" alt="Concept 2 Front Profile" data-caption="Front profile sketch of the second concept">
                                            <img src="../images/Development Timeline/Week 1/concept2_no_lid.PNG" class="carousel-img" alt="Concept 2 with No Lid" data-caption="Sketch of the second concept without the protective cover">
                                            <img src="../images/Development Timeline/Week 1/concept2_side_profile.PNG" class="carousel-img" alt="Concept 2 Side Profile" data-caption="Side profile sketch of the second concept">
                                            <img src="../images/Development Timeline/Week 1/concept3.PNG" class="carousel-img" alt="Concept 3" data-caption="Sketch of the third concept">
                                            <img src="../images/Development Timeline/Week 1/concept3_inspiration.jpg" class="carousel-img" alt="Concept 3 Inspiration" data-caption="Inspiration for the creation of the third concept">

                                            <button class="carousel-btn prev-btn" data-target="carousel1">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel1">&#10095;</button>
                                        </div>
                                        <p class="carousel-subcaption text-muted mt-2 small text-center" aria-live="polite">
                                            Sketch of the first concept
                                        </p>
                                    </div>
                                    
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 7%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="2">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 2: Preliminary CAD</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel2">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel2">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 14%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="3">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 3-4: Detailed CAD</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel3">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel3">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 28%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="4">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 5-6: Partial 3D Printing & Form-fit Testing</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel4">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel4">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 42%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="5">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 7-8: Full Assembly & Basic Electronics Testing</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel5">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel5">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 56%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="6">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 9-10: Initial Gait Programming</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel6">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel6">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 70%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="7">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 11-12: Optimization</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel7">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel7">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 84%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="week-card" data-week="8">
                        <div class="week-card-inner">
                            <div class="row align-items-center">
                                <h2 class="week-title">Week 13-14: Refinement & Final Adjustments</h2>
                                <div class="col-md-6">
                                    <p class="week-description">
                                        Brief description of the tasks and milestones for this week.
                                    </p>
                                </div>
                                <div class="col-md-6 text-center">
                                    <div class="carousel" data-id="carousel2">
                                        <div class="carousel-container rounded shadow aspect-1-1">
                                            <img src="../images/tail-elliptical.jpg" class="carousel-img active" alt="Elliptical horizontal tail">
                                            <img src="../images/tail-trapezoidal.JPG" class="carousel-img" alt="Trapezoidal horizontal tail">

                                            <button class="carousel-btn prev-btn" data-target="carousel8">&#10094;</button>
                                            <button class="carousel-btn next-btn" data-target="carousel8">&#10095;</button>
                                        </div>
                                    </div>
                                    <p class="text-muted mt-2 small text-center">Tail assemblies utilizing an elliptical and a trapezoidal horizontal tail</p>
                                </div>
                                <div class="week-progress">
                                    <label>Progress:</label>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="deck-controls">
                    <button class="week-prev-btn">Prev</button>

                    <div class="deck-indicators-wrapper">
                        <span class="indicator-label">Weeks</span>
                        <div class="deck-indicators">
                            <span data-week="1" class="active">1</span>
                            <span data-week="2">2</span>
                            <span data-week="3">3-4</span>
                            <span data-week="4">5-6</span>
                            <span data-week="5">7-8</span>
                            <span data-week="6">9-10</span>
                            <span data-week="7">11-12</span>
                            <span data-week="8">13-14</span>
                        </div>
                    </div>

                    <button class="week-next-btn">Next</button>
                </div>
            </div>
        </section>
        
        <section class="mb-5">
            <div class="row align-items-center">
                <div class="col-md-5 text-start">
                    <h2 class="fw-bold mb-3 text-start" data-aos="fade-up">My Journey Video</h2>
                    <p class="text-muted" data-aos="fade-up" data-aos-delay="100">
                        This video documents the entire process of designing, prototyping, and building a legged robot from the ground up. From initial sketches to CAD modeling, 3D printing, assembly, and programming, the project challenged me to integrate mechanics, electronics, and software to create a functional walking robot. Watch months of work come together in a final, working design. 
                    </p>
                </div>
                <div class="col-md-7">
                    <div class="ratio ratio-16x9" data-aos="zoom-in">
                        <iframe src="https://www.youtube.com/embed/JbCZgbq841s" 
                                title="MECE E4611 - Robotics Studio - Journey Video" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin"
                                allowfullscreen
                        ></iframe>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-5">
            <h2 class="fw-bold mb-3" data-aos="fade-up">3D Model of my Robot</h2>
            <div class="sketchfab-embed-wrapper" data-aos="zoom-in">
                <iframe
                title="Detailed Design - Overall Assembly  V1"
                frameborder="0"
                allowfullscreen
                mozallowfullscreen="true"
                webkitallowfullscreen="true"
                allow="autoplay; fullscreen; xr-spatial-tracking"
                xr-spatial-tracking
                execution-while-out-of-viewport
                execution-while-not-rendered
                web-share
                src="https://sketchfab.com/models/2dd0337cc36144c7ba597c684415d36c/embed?autospin=1&autostart=1"
                ></iframe>
            </div>
        </section>
    </main>


    <footer class="modern-footer text-center">
        <div class="container">
            <h5 class="footer-title mb-4">Get in Touch</h5>

            <p class="mb-2">
            <i class="fas fa-envelope me-2"></i>
            <a href="mailto:d.reyes@columbia.edu">d.reyes@columbia.edu</a>
            </p>
            <p class="mb-4">
            <i class="fas fa-phone me-2"></i>
            <a href="tel:+17866750086">(786) 675-0086</a>
            </p>

            <h5 class="footer-title mb-3">Follow Me</h5>
            <div class="social-icons d-flex justify-content-center gap-3 mb-4">
            <a href="https://github.com/davidereyes2002" target="_blank" class="icon-btn" aria-label="GitHub">
                <i class="fab fa-github"></i>
            </a>
            <a href="https://www.linkedin.com/in/david-reyes-gua/" target="_blank" class="icon-btn" aria-label="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
            </div>

            <div class="footer-copy mt-1">
                &copy; 2025 David Reyes. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
    class Carousel {
        constructor(carouselElement) {
            this.carouselElement = carouselElement;
            this.imageElements = Array.from(carouselElement.querySelectorAll('.carousel-img'));
            this.captionElement = carouselElement.querySelector('.carousel-subcaption');
            this.currentIndex = 0;
            this.timer = null;
            this.locked = false;

            this.captionFadeOutT = null;
            this.captionFadeInT = null;

            this.prevButton = document.querySelector(`.prev-btn[data-target="${this.id}"]`);
            this.nextButton = document.querySelector(`.next-btn[data-target="${this.id}"]`);

            this.prevButton.addEventListener('click', () => this.prev());
            this.nextButton.addEventListener('click', () => this.next());

            this.setCaption(this.currentIndex, false);

            this.startAutoplay();
        }

        get id() {
            return this.carouselElement.dataset.id;
        }

        showImage(newIndex, direction) {
            if (this.locked || newIndex === this.currentIndex) return;

            this.locked = true;
            const currentImg = this.imageElements[this.currentIndex];
            const nextImg = this.imageElements[newIndex];

            this.imageElements.forEach(img =>
                img.classList.remove('active', 'wipe', 'wipe-right', 'wipe-left')
            );

            currentImg.classList.add('active');

            nextImg.classList.add('wipe');
            nextImg.classList.add(direction === 'next' ? 'wipe-right' : 'wipe-left');

            this.setCaption(newIndex, true); 

            setTimeout(() => {
                this.imageElements.forEach(img =>
                    img.classList.remove('active', 'wipe', 'wipe-right', 'wipe-left')
                );
                nextImg.classList.add('active');
                this.currentIndex = newIndex;
                this.locked = false;
            }, 850);

            this.resetAutoplay();
        }

        setCaption(newIndex, animate = true) {
            if (!this.captionElement) return;
            const newCaption =
            this.imageElements[newIndex].dataset.caption || this.imageElements[newIndex].alt || '';

            // stop previous animations from stepping on the new one
            clearTimeout(this.captionFadeOutT);
            clearTimeout(this.captionFadeInT);

            if (!animate) {
                this.captionElement.textContent = newCaption;
                this.captionElement.classList.remove('fade-out', 'fade-in');
                return;
            }

            this.captionElement.classList.add('fade-out');

            // let it fade out first, then swap and fade in
            this.captionFadeOutT = setTimeout(() => {
                this.captionElement.textContent = newCaption;
                this.captionElement.classList.remove('fade-out');
                this.captionElement.classList.add('fade-in');

                this.captionFadeInT = setTimeout(() => {
                    this.captionElement.classList.remove('fade-in'); // return to normal opacity
                }, 400);
            }, 300);
        }

        next() {
            const newIndex = (this.currentIndex + 1) % this.imageElements.length;
            this.showImage(newIndex, 'next');
        }

        prev() {
            const newIndex = (this.currentIndex - 1 + this.imageElements.length) % this.imageElements.length;
            this.showImage(newIndex, 'prev');
        }

        startAutoplay() {
            this.timer = setInterval(() => this.next(), 5000);
        }

        resetAutoplay() {
            clearInterval(this.timer);
            this.startAutoplay();
        }
    }

    document.querySelectorAll('.carousel').forEach(carouselEl => {
        new Carousel(carouselEl);
    });

    window.addEventListener("DOMContentLoaded", () => {
        initAOS();
        initDropdowns();
        initWeekDeck();
        resizeDeckToActive();
    });

    function initAOS() {
        AOS.init();
        document.body.classList.add("loaded");
    }

    function initDropdowns() {
        const dropdowns = document.querySelectorAll(".nav-item.dropdown");

        dropdowns.forEach((dropdown) => {
            const toggle = dropdown.querySelector('[data-bs-toggle="dropdown"]');
            const menu = dropdown.querySelector(".dropdown-menu");

            dropdown.addEventListener("mouseenter", () => {
                const bsDropdown = bootstrap.Dropdown.getOrCreateInstance(toggle);
                bsDropdown.show();
            });

            dropdown.addEventListener("mouseleave", () => {
                const bsDropdown = bootstrap.Dropdown.getOrCreateInstance(toggle);
                bsDropdown.hide();
            });

            toggle.addEventListener("click", (e) => {
                e.preventDefault();
                const bsDropdown = bootstrap.Dropdown.getOrCreateInstance(toggle);
                if (menu.classList.contains("show")) {
                    bsDropdown.hide();
                } else {
                    bsDropdown.show();
                }
            });
        });
    }
    function scrollToActiveCard() {
        const activeCard = document.querySelector(".week-card.active");
        if (activeCard) {
            const cardTop = activeCard.getBoundingClientRect().top + window.scrollY;
            const offset = window.innerHeight * 0.15;
            window.scrollTo({
                top: cardTop - offset,
                behavior: "smooth"
            });
        }
    }


    function initWeekDeck() { 
        const cards = document.querySelectorAll(".week-card");
        const prevBtn = document.querySelector(".week-prev-btn");
        const nextBtn = document.querySelector(".week-next-btn");
        const indicators = document.querySelectorAll(".deck-indicators span");

        if (!cards.length) return;

        let currentIndex = 0;

        function updateDeck(targetIndex, { scroll = false } = {}) {
            const forward = targetIndex > currentIndex;

            cards.forEach((card, i) => {
                card.classList.remove("active", "before", "after");

                if (i === targetIndex) {
                    card.classList.add("active");
                } else if (i < targetIndex) {
                    card.classList.add("before");
                } else {
                    card.classList.add("after");
                }
            });

            indicators.forEach((ind, i) => {
                ind.classList.toggle("active", i === targetIndex);
            });

            prevBtn.disabled = targetIndex === 0;
            nextBtn.disabled = targetIndex === cards.length - 1;

            currentIndex = targetIndex;

            if (scroll) {
                scrollToActiveCard();
            }
        }

        prevBtn?.addEventListener("click", () => {
            if (currentIndex > 0) updateDeck(currentIndex - 1, { scroll: true });
        });

        nextBtn?.addEventListener("click", () => {
            if (currentIndex < cards.length - 1) updateDeck(currentIndex + 1, { scroll: true });
        });

        indicators.forEach((ind, i) => {
            ind.addEventListener("click", () => updateDeck(i, { scroll: true }));
        });

        updateDeck(0, { scroll: false });
    }

    function resizeDeckToActive() {
        const deck = document.querySelector(".week-deck");
        const activeCard = deck.querySelector(".week-card.active");
        if (activeCard) {
            deck.style.height = activeCard.offsetHeight + "px";
        }
    }

    function setActiveCard(week) {
        document.querySelectorAll(".week-card").forEach(card => {
            card.classList.remove("active", "before", "after");
        });
        const active = document.querySelector(`.week-card[data-week="${week}"]`);
        if (active) {
            active.classList.add("active");
            resizeDeckToActive();
        }
    }

    window.addEventListener("resize", resizeDeckToActive);
    </script>



</body>
</html>