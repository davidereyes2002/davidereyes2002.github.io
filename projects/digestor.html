<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="David, Reyes, Columbia University, Mechanical Engineering, Robotics">
    <meta name="description" content="David Reyes's Portfolio Website">
    <meta name="author" content="David Reyes">
    <meta name="viewport" content="initial-scale=1, width=device-width">

    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">

    <title>Cow Digestor | David Reyes</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar sticky-top shadow">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center gap-2" href="../index.html">
                <span class="brand-icon">DR</span>
                <span class="brand-name">David Reyes</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../about.html">About</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Projects</a>
                        <ul class="dropdown-menu dropdown-menu-dark shadow">
                            <li><a class="dropdown-item" href="../projects/bipedal.html">Bipedal Walker</a></li>
                            <li><a class="dropdown-item" href="../projects/aircraft.html">Aircraft Design</a></li>
                            <li><a class="dropdown-item" href="../projects/digestor.html">Cow Digestor</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Relevant Coursework</a>
                        <ul class="dropdown-menu dropdown-menu-dark shadow">
                            <li><a class="dropdown-item" href="../coursework/labview.html">Data Acquisition</a></li>
                            <li><a class="dropdown-item" href="../coursework/designlab.html">Manufacturing Lab</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container mt-5">
        <h1 class="text-center mb-5" data-aos="zoom-in-up">Cow Digestor Simulator</h1>
        <section class="mb-5">
            <div class="row align-items-center">
                <div class="col-md-10 mx-auto">
                    <div class="bg-light p-4 rounded shadow-sm" data-aos="fade-up">
                        <h2 class="fw-bold mb-3">Project Overview</h2>
                        <p class="lead text-muted">
                        The primary objectives of the Cow Digestor Simulator project are twofold: firstly, to develop, build, test, and evaluate a cattle digestion simulator unit that surpasses the performance of the legacy Virtus, Inc. units in their current upgraded form; and secondly, to extend and enhance their capabilities to meet the forward-looking customer needs of a modern commercial product. Ultimately, it was expected to deliver a functional prototype of a cattle digestion simulator for animal sciences research while robustly demonstrating its performance in an industrial research environment.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <section class="mb-5 bg-light py-5 rounded shadow-sm">
            <div class="container">
                <div class="row gy-4">
                    <h2 class="fw-bold" data-aos="fade-right">Motor RPM Analysis and Adjustments</h2>
                <!-- Left Column -->
                    <div class="col-md-6">
                        

                        <div data-aos="fade-right" data-aos-delay="50">
                        <h5 class="fw-semibold">Initial Design and Specification</h5>
                        <p class="text-muted">Based on torque and speed requirements needed to stir a viscous substance similar to honey, a 19.1V DC motor was selected during the initial design phase. It operated at a max speed of 373 RPM, delivering 202 RPM under continuous torque of 16 in.-oz.</p>
                        </div>

                        <div data-aos="fade-right" data-aos-delay="100">
                        <h5 class="fw-semibold mt-4">Testing and Prototyping</h5>
                        <ul class="text-muted">
                            <li>Identified discrepancies between set and actual RPM during motor testing.</li>
                            <li>Realigned the motor shaft and optimized bearing configurations to reduce friction.</li>
                        </ul>
                        </div>

                        <div data-aos="fade-right" data-aos-delay="150">
                        <h5 class="fw-semibold mt-4">Electrical Adjustments</h5>
                        <ul class="text-muted">
                            <li>Discovered the motor was receiving 24V instead of 19.1V.</li>
                            <li>Installed a DC-DC step-down converter to supply the correct voltage.</li>
                            <li>Resolved wiring inconsistencies and improved signal reliability.</li>
                        </ul>
                        </div>

                        <div data-aos="fade-right" data-aos-delay="200">
                        <h5 class="fw-semibold mt-4">Troubleshooting</h5>
                        <ul class="text-muted">
                            <li>Used a stop-motion camera to record motor rotation and calculate RPM via frame-by-frame analysis.</li>
                            <li>Mapped RPM to microcontroller effort levels for precise performance tracking.</li>
                        </ul>
                        </div>

                        <div data-aos="fade-right" data-aos-delay="250">
                        <h5 class="fw-semibold mt-4">Results</h5>
                        <p class="text-muted">Successfully minimized the discrepancy between set and actual RPM through iterative mechanical and electrical improvements, ensuring stable and reliable motor operation.</p>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="col-md-6">
                        <div data-aos="fade-left" data-aos-delay="300">
                            <h5 class="fw-semibold">Code Implementation</h5>
                            <p class="text-muted">The Arduino code below was used to read and display real-time motor speed on a 16x2 LCD, enabling accurate monitoring and control.</p>
                            <div class="bg-dark text-white p-3 rounded code-container collapsed" id="codeBlock">
                                <pre><code>
#include &lt;LiquidCrystal_I2C.h&gt;
LCD_I2C lcd(0x27); // For a 16 chars and 2 line display

int in1 = 8; // Declaring where the module is wired
int in2 = 9;
int ConA = 10; // PWM DI/DO pin
int speed1;

void setup()
{
Serial.begin(9600);
lcd.begin();
lcd.backlight();
lcd.print("RPM: ");
pinMode(in1, OUTPUT);
pinMode(in2, OUTPUT); 
pinMode(ConA, OUTPUT);
}

void loop()
{
digitalWrite(in1, LOW); // Switch between HIGH and LOW to change direction
digitalWrite(in2, HIGH);

speed1 = analogRead(A0);
speed1 = map(speed1, 0, 1023, 0, 255);
analogWrite(ConA, speed1); // Inject value to motor

if (speed1 &lt; 90) {
    speed1 = 0;
} else if (speed1 &gt; 253) {
    speed1 = 160;
} else {
    speed1 = map(speed1, 90, 255, 25, 160);
}

Serial.println(speed1);

lcd.setCursor(5, 0);
if (speed1 &lt; 100) {
    lcd.print(" ");
}
if (speed1 &lt; 10) {
    lcd.print(" ");
}
lcd.print(speed1);
}
                                </code></pre>
                            </div>
                            <button class="btn btn-sm btn-outline-primary mt-2" id="toggleCodeBtn">Show Full Code</button>
                        </div>

                        <div data-aos="fade-left" data-aos-delay="400">
                            <h5 class="fw-semibold mt-4">Code Explanation</h5>
                            <ul class="text-muted">
                                <li><strong>Libraries & Initialization:</strong> Uses LCD_I2C to control the display.</li>
                                <li><strong>Setup:</strong> Initializes pins and LCD screen.</li>
                                <li><strong>Loop:</strong> Reads analog input, maps it to PWM, updates display and serial output.</li>
                            </ul>
                        </div>

                        <div data-aos="fade-left" data-aos-delay="500">
                            <h5 class="fw-semibold mt-4">Challenges and Solutions</h5>
                            <p class="text-muted">Motor speed discrepancies were addressed through real-time monitoring and fine-tuned adjustments, resulting in improved reliability and performance consistency.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="mb-5">
            <div class="container">
                <div class="row align-items-center gy-4">
                <div class="col-md-6" data-aos="fade-up">
                    <h2 class="fw-bold mb-3">Control Test for Motor Control Subsystem</h5>
                    <p class="text-muted">
                    In the video, we demonstrate the testing of the motor control subsystem for the Cow Digestor Simulator project. The video showcases all key components, including the power supply regulation, Arduino Nano, DC-DC step-down converters, potentiometer for speed adjustment, L298N motor driver, and the I2C LCD for visual feedback. Watch how our troubleshooting and adjustments led to precise motor control and consistent performance.
                    </p>
                </div>
                <div class="col-md-6" data-aos="zoom-in">
                    <div class="ratio ratio-16x9">
                    <iframe src="https://www.youtube.com/embed/akY7Vz-SK6k"
                            title="Control Test for Motor Control subsystem" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            referrerpolicy="strict-origin-when-cross-origin" 
                            allowfullscreen
                    ></iframe>
                    </div>
                </div>
                </div>
            </div>
        </section>
        <section class="mb-5 bg-light py-5 rounded shadow-sm">
            <div class="container">
                <h2 class="fw-bold mb-4 text-center" data-aos="fade-up">Motor Control System</h2>

                <div class="row gy-5">
                    <div class="col-md-6" data-aos="fade-up-right">
                        <h5 class="fw-semibold">Power Supply Regulation</h5>
                        <ul class="text-muted">
                        <li>Managed the connection of a 24V power supply to the system, regulated by two DC-DC step-down converters.</li>
                        <li>Ensured voltage reduction to 19.1V for the motor and to 5V for the Arduino Nano and other components.</li>
                        </ul>

                        <h5 class="fw-semibold mt-4">Speed Adjustment</h5>
                        <ul class="text-muted">
                        <li>Used a potentiometer knob to set desired motor speed, generating a varying analog voltage signal.</li>
                        <li>Read analog signal (0-5V) with Arduino Nano and converted it to a digital value (0-1023).</li>
                        </ul>

                        <h5 class="fw-semibold mt-4">PWM Signal Generation</h5>
                        <ul class="text-muted">
                        <li>Calculated PWM duty cycle from the digital value.</li>
                        <li>Generated PWM signals to the L298N motor driver to control motor speed/direction.</li>
                        </ul>

                        <h5 class="fw-semibold mt-4">Visual Feedback</h5>
                        <p class="text-muted">Provided RPM feedback through I2C LCD based on motor effort.</p>
                    </div>

                    <div class="col-md-6 text-center" data-aos="zoom-in" data-aos-delay="100">
                        <div class="mx-5 mb-5">
                            <div class="carousel" data-id="carousel1">
                                <div class="carousel-container rounded shadow aspect-1-1">
                                    <img src="../images/dc_motor_schematic.JPEG" class="carousel-img active" alt="DC Motor Schematic">
                                    <img src="../images/digestor_preview1.JPG" class="carousel-img" alt="Motor Control System">
                                    <button class="carousel-btn prev-btn" data-target="carousel1">&#10094;</button>
                                    <button class="carousel-btn next-btn" data-target="carousel1">&#10095;</button>
                                </div>
                            </div>
                            <p class="text-muted mt-2 small text-center">Wiring diagram and initial wiring of the motor control subsystem</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        
        <section class="mb-5">
            <h2 class="fw-bold mb-3" data-aos="fade-up">3D Model of the Simulator</h2>
            <div class="sketchfab-embed-wrapper" data-aos="zoom-in">
                <iframe
                title="Cow Digestor - Total Assembly"
                frameborder="0"
                allowfullscreen
                mozallowfullscreen="true"
                webkitallowfullscreen="true"
                allow="autoplay; fullscreen; xr-spatial-tracking"
                xr-spatial-tracking
                execution-while-out-of-viewport
                execution-while-not-rendered
                web-share
                src="https://sketchfab.com/models/d775d9a7cdf44b21a6c4b99d8ce2360b/embed?autospin=1&autostart=1"
                ></iframe>
            </div>
        </section>
        <section class="mb-5">
            <div class="row align-items-center">
                <div class="col-md-5 text-start">
                    <h2 class="fw-bold mb-3 text-start" data-aos="fade-up">90-second Pitch Video</h2>
                    <p class="text-muted" data-aos="fade-up" data-aos-delay="100">
                        Experience our senior design capstone project at the University of Florida, where our team developed an innovative cattle digestion simulator in collaboration with the animal sciences lab. This 90s-style pitch video showcases our concept, focusing on easy cleaning with stainless steel construction and removable connections. Our design includes stick-on flexible heaters for uniform temperature distribution, enhancing performance and user safety. The project highlights rigorous testing, 3D-printed parts, and a user-friendly design for reliable, hygienic cow simulations.
                    </p>
                </div>
                <div class="col-md-7">
                    <div class="ratio ratio-16x9" data-aos="zoom-in">
                        <iframe src="https://www.youtube.com/embed/lRQdA9jRibI"
                                title="2024 Spring 4502 - 90 Sec Elevator Pitch - Group MT0B-1" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                allowfullscreen
                        ></iframe>
                    </div>
                </div>
            </div>
        </section>
    </main>


    <footer class="modern-footer text-center">
        <div class="container">
            <h5 class="footer-title mb-4">Get in Touch</h5>

            <p class="mb-2">
            <i class="fas fa-envelope me-2"></i>
            <a href="mailto:d.reyes@columbia.edu">d.reyes@columbia.edu</a>
            </p>
            <p class="mb-4">
            <i class="fas fa-phone me-2"></i>
            <a href="tel:+17866750086">(786) 675-0086</a>
            </p>

            <h5 class="footer-title mb-3">Follow Me</h5>
            <div class="social-icons d-flex justify-content-center gap-3 mb-4">
            <a href="https://github.com/davidereyes2002" target="_blank" class="icon-btn" aria-label="GitHub">
                <i class="fab fa-github"></i>
            </a>
            <a href="https://www.linkedin.com/in/david-reyes-gua/" target="_blank" class="icon-btn" aria-label="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
            </div>

            <div class="footer-copy mt-1">
                &copy; 2025 David Reyes. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
    class Carousel {
        constructor(carouselElement) {
        this.carouselElement = carouselElement;
        this.imageElements = Array.from(carouselElement.querySelectorAll('.carousel-img'));
        this.currentIndex = 0;
        this.timer = null;
        this.locked = false;

        this.prevButton = document.querySelector(`.prev-btn[data-target="${this.id}"]`);
        this.nextButton = document.querySelector(`.next-btn[data-target="${this.id}"]`);

        this.prevButton.addEventListener('click', () => this.prev());
        this.nextButton.addEventListener('click', () => this.next());

        this.startAutoplay();
        }

        get id() {
        return this.carouselElement.dataset.id;
        }

        showImage(newIndex, direction) {
        if (this.locked || newIndex === this.currentIndex) return;

        this.locked = true;
        const currentImg = this.imageElements[this.currentIndex];
        const nextImg = this.imageElements[newIndex];

        // Reset classes
        this.imageElements.forEach(img =>
            img.classList.remove('active', 'wipe', 'wipe-right', 'wipe-left')
        );

        // Ensure current remains visible during transition
        currentImg.classList.add('active');

        // Prepare next image
        nextImg.classList.add('wipe');
        nextImg.classList.add(direction === 'next' ? 'wipe-right' : 'wipe-left');

        // After animation completes, clean up
        setTimeout(() => {
            this.imageElements.forEach(img =>
            img.classList.remove('active', 'wipe', 'wipe-right', 'wipe-left')
            );
            nextImg.classList.add('active');
            this.currentIndex = newIndex;
            this.locked = false;
        }, 850); // slightly longer than animation

        this.resetAutoplay();
        }

        next() {
        const newIndex = (this.currentIndex + 1) % this.imageElements.length;
        this.showImage(newIndex, 'next');
        }

        prev() {
        const newIndex = (this.currentIndex - 1 + this.imageElements.length) % this.imageElements.length;
        this.showImage(newIndex, 'prev');
        }

        startAutoplay() {
        this.timer = setInterval(() => this.next(), 5000);
        }

        resetAutoplay() {
        clearInterval(this.timer);
        this.startAutoplay();
        }
    }

    document.querySelectorAll('.carousel').forEach(carouselEl => {
        new Carousel(carouselEl);
    });
    
    window.addEventListener("DOMContentLoaded", () => {
        AOS.init();
        document.body.classList.add("loaded");
    });

    

    window.addEventListener("DOMContentLoaded", () => {
        initAOS();
        initDropdowns();
        initCodeToggleSize();
    });

    function initAOS() {
        AOS.init();
        document.body.classList.add("loaded");
    }

    function initDropdowns() {
        const dropdowns = document.querySelectorAll(".nav-item.dropdown");

        dropdowns.forEach((dropdown) => {
            const toggle = dropdown.querySelector('[data-bs-toggle="dropdown"]');
            const menu = dropdown.querySelector(".dropdown-menu");

            // Show on hover
            dropdown.addEventListener("mouseenter", () => {
                const bsDropdown = bootstrap.Dropdown.getOrCreateInstance(toggle);
                bsDropdown.show();
            });

            // Hide on mouse leave
            dropdown.addEventListener("mouseleave", () => {
                const bsDropdown = bootstrap.Dropdown.getOrCreateInstance(toggle);
                bsDropdown.hide();
            });

            // Also allow click toggle (Bootstrap default)
            toggle.addEventListener("click", (e) => {
                e.preventDefault();
                const bsDropdown = bootstrap.Dropdown.getOrCreateInstance(toggle);
                if (menu.classList.contains("show")) {
                    bsDropdown.hide();
                } else {
                    bsDropdown.show();
                }
            });
        });
    }

    function initCodeToggleSize() {
        const toggleBtn = document.getElementById("toggleCodeBtn");
        const codeBlock = document.getElementById("codeBlock");

        toggleBtn.addEventListener("click", function () {
            const isExpanding = !codeBlock.classList.contains("expanded");
            codeBlock.classList.toggle("expanded");

            if (isExpanding) {
                this.textContent = "Show Less";
            } else {
                this.textContent = "Show Full Code";
                // Smooth scroll back to the section top
                codeBlock.scrollIntoView({ behavior: "smooth", block: "start" });
            }
        });
    }

    </script>



</body>
</html>